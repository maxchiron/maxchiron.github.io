<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>MaxChiron Blog</title><link>https://maxchiron.github.io</link><description>汪周谦还记得那年第一次读创世纪：神说要有光，光便有了。</description><copyright>MaxChiron Blog</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://avatars.githubusercontent.com/u/85681332</url><title>avatar</title><link>https://maxchiron.github.io</link></image><lastBuildDate>Tue, 12 Nov 2024 03:28:15 +0000</lastBuildDate><managingEditor>MaxChiron Blog</managingEditor><ttl>60</ttl><webMaster>MaxChiron Blog</webMaster><item><title>数据备份标准流程</title><link>https://maxchiron.github.io/post/4.html</link><description>### Step1 复制&#13;
&#13;
&gt; 优先rsync，次选cp&#13;
&#13;
#### rsync&#13;
&#13;
`rsync -av --sparse 源目录/ 目标目录/`&#13;
&#13;
&lt;details&gt;&lt;summary&gt;参数解释&lt;/summary&gt;&#13;
&#13;
1. `rsync` 基本介绍：&#13;
   - 一个高效的文件同步和传输工具&#13;
   - 支持增量传输（只传输变化的部分）&#13;
   - 可以保持文件的所有属性&#13;
&#13;
2. 参数解释：&#13;
   - `-a`（archive模式）包含以下功能：&#13;
     * -r：递归复制目录&#13;
     * -l：复制符号链接&#13;
     * -p：保持权限&#13;
     * -t：保持时间戳&#13;
     * -g：保持组&#13;
     * -o：保持所有者&#13;
     * -D：保持设备文件和特殊文件&#13;
   &#13;
   - `-v`（verbose）:&#13;
     * 显示详细的传输信息&#13;
     * 可以看到每个被传输的文件&#13;
   &#13;
   - `--sparse`:&#13;
     * 特殊处理稀疏文件&#13;
     * 保持文件的'稀疏'特性&#13;
     * 节省磁盘空间&#13;
&#13;
3. 路径格式说明：&#13;
   - `源目录/`：末尾的/很重要&#13;
     * 带/：复制目录中的内容&#13;
     * 不带/：复制目录本身&#13;
   &#13;
   - `目标目录/`：&#13;
     * 指定同步的目标位置&#13;
     * 如果目标目录不存在，会自动创建&#13;
&#13;
4. 命令执行效果：&#13;
   - 将源目录中的所有内容复制到目标目录&#13;
   - 保持所有文件属性和权限&#13;
   - 智能处理稀疏文件&#13;
   - 显示传输进度&#13;
   - 只传输发生变化的文件&#13;
&#13;
5. 常见使用场景：&#13;
   - 备份数据&#13;
   - 目录同步&#13;
   - 服务器之间传输文件&#13;
   - 维护镜像站点&#13;
&#13;
6. 优势：&#13;
   - 效率高（增量传输）&#13;
   - 可靠性好&#13;
   - 保持文件属性&#13;
   - 支持断点续传&#13;
   - 网络传输时支持压缩&#13;
&#13;
使用示例：&#13;
```bash&#13;
# 本地目录同步&#13;
rsync -av --sparse /home/user/docs/ /backup/docs/&#13;
&#13;
# 远程同步（通过SSH）&#13;
rsync -av --sparse /local/path/ user@remote:/path/&#13;
```&#13;
&#13;
&lt;/details&gt;&#13;
&#13;
#### cp&#13;
&#13;
`rsync -av --sparse 源目录/ 目标目录/`&#13;
&#13;
&#13;
### Step2 校验&#13;
&#13;
&gt; md5sum校验原始数据和备份数据&#13;
&#13;
```bash&#13;
find 源目录 -type f -exec md5sum {} \; | sort &gt; 源.md5&#13;
find 目标目录 -type f -exec md5sum {} \; | sort &gt; 目标.md5&#13;
diff 源.md5 目标.md5&#13;
```&#13;
&#13;
&lt;details&gt;&lt;summary&gt;参数解释&lt;/summary&gt;&#13;
&#13;
```&#13;
1. `find 目录`&#13;
   - find 命令用于在指定目录中搜索&#13;
   - '目录' 是要搜索的起始目录&#13;
&#13;
2. `-type f`&#13;
   - 指定只查找普通文件&#13;
   - 排除目录、符号链接等其他类型的文件&#13;
&#13;
3. `-exec md5sum {} \;`&#13;
   - -exec 表示对找到的每个文件执行后面的命令&#13;
   - md5sum 是计算文件的 MD5 校验和的命令&#13;
   - {} 是一个占位符，代表 find 找到的每个文件名&#13;
   - \; 表示 -exec 命令的结束&#13;
&#13;
4. `| sort`&#13;
   - | 是管道符号，将前面命令的输出传递给 sort 命令&#13;
   - sort 命令将结果按字母顺序排序&#13;
&#13;
5. `&gt; xxx.md5`&#13;
   - &gt; 是重定向符号，将排序后的结果保存到文件&#13;
   - xxx.md5 是保存结果的目标文件&#13;
```&#13;
&lt;/details&gt;&#13;
。</description><guid isPermaLink="true">https://maxchiron.github.io/post/4.html</guid><pubDate>Tue, 12 Nov 2024 03:26:10 +0000</pubDate></item><item><title>从垟儿路到飞霞北路</title><link>https://maxchiron.github.io/post/3.html</link><description>`Gmeek-html&lt;audio controls autoplay&gt;&lt;source src='https://maxchiron.github.io/Gmeek-files/issue3/Youngso_Kim-Like_a_Star.m4a' type='audio/mp4'&gt;&lt;/audio&gt;`&#13;
&#13;
&gt; 虽然时间只过去了不足15个小时，但我已经忘记了从垟儿路向东进入飞霞北路时的那缕晨光。</description><guid isPermaLink="true">https://maxchiron.github.io/post/3.html</guid><pubDate>Wed, 28 Aug 2024 00:42:16 +0000</pubDate></item><item><title>Fancy和十一月的雨</title><link>https://maxchiron.github.io/post/2.html</link><description>`Gmeek-html&lt;audio controls autoplay&gt;&lt;source src='https://maxchiron.github.io/Gmeek-files/issue2/Tomoko_Aran亜蘭知子-Midnight_Pretenders_Instrumental.m4a' type='audio/mp4'&gt;&lt;/audio&gt;`&#13;
&#13;
&gt; '我清楚地知道，我所付出的一切都将化作雨水，消失在她的回忆中。</description><guid isPermaLink="true">https://maxchiron.github.io/post/2.html</guid><pubDate>Mon, 26 Aug 2024 10:30:20 +0000</pubDate></item><item><title>Hello, Gmeek.</title><link>https://maxchiron.github.io/post/1.html</link><description># Hello Gmeek&#13;
&#13;
&gt; I would die one day. &#13;
&gt; Hope my outputs may not.&#13;
&#13;
This is the first post with Gmeek framework.&#13;
&#13;
😀 。</description><guid isPermaLink="true">https://maxchiron.github.io/post/1.html</guid><pubDate>Mon, 26 Aug 2024 08:03:59 +0000</pubDate></item></channel></rss>